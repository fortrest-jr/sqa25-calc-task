# Калькулятор для мастеркласса SQA-days 2025

Простое веб-приложение-калькулятор с REST API для демонстрации различных фич взаимодействия с кодом на мастерклассе по AI агентам.

## Описание

Этот проект представляет собой веб-калькулятор с двумя основными компонентами:

### Основная функциональность
- **REST API**: полный набор endpoints для математических операций
- **Базовые математические операции**: сложение, вычитание, умножение, деление
- **Обработка ошибок**: корректная обработка деления на ноль и некорректных данных
- **Покрытие тестами**: все API endpoints покрыты тестами

### Дополнительная фича
- **История вычислений**: сохранение всех выполненных операций в JSON файл
- **Персистентность**: история сохраняется между запусками приложения
- **Управление историей**: просмотр и очистка истории через API

## Структура проекта

```
├── calculator.py      # Основная логика калькулятора
├── app.py            # Flask веб-приложение с REST API
├── test_calculator.py # Unit-тесты для основной функциональности
├── test_api.py       # Тесты для API endpoints
├── main.py           # CLI интерфейс (legacy)
├── requirements.txt  # Зависимости проекта
└── README.md        # Этот файл
```

## Установка и запуск

### Установка

1. Убедитесь, что у вас установлен uv. Если нет, [скачайте и установите](https://docs.astral.sh/uv/getting-started/installation/) его

    Проверка, что `uv` установлен:
   ```bash
   uv --version
   ```

2. Установите Python и зависимости проекта через `uv`:
   ```bash
   uv python install
   uv pip install -r requirements.txt
   ```

### Запуск веб-приложения

Запустите приложение с помощью `uv`:
```bash
uv run python app.py
```

Приложение будет доступно по адресу: http://localhost:5000

### Запуск тестов
```bash
uv run pytest
```

## API Endpoints

### Проверка работоспособности
- `GET /api/health` - проверка статуса API

### Математические операции
- `POST /api/add` - сложение
- `POST /api/subtract` - вычитание  
- `POST /api/multiply` - умножение
- `POST /api/divide` - деление
- `POST /api/calculate` - универсальный endpoint

### Работа с историей
- `GET /api/history` - получить историю вычислений
- `DELETE /api/history` - очистить историю

### Примеры запросов

#### Сложение
```bash
curl -X POST http://localhost:5000/api/add \
  -H "Content-Type: application/json" \
  -d '{"a": 2, "b": 3}'
```

#### Получение истории
```bash
curl http://localhost:5000/api/history
```

#### Универсальный endpoint
```bash
curl -X POST http://localhost:5000/api/calculate \
  -H "Content-Type: application/json" \
  -d '{"operation": "multiply", "a": 4, "b": 5}'
```

## Особенности для мастеркласса

1. **Простота**: код легко читается и понимается
2. **Тестируемость**: основная функциональность и API покрыты тестами
3. **Расширяемость**: легко добавить новые операции или фичи
4. **Понятная тематика**: калькулятор знаком всем участникам
5. **REST API**: современный подход к разработке веб-приложений
6. **Дополнительная фича**: история вычислений - понятная без объяснений

## Возможные задачи для мастеркласса

### Расширение функциональности
- Добавление новых математических операций (степень, корень, логарифм)
- Добавление валидации входных данных
- Реализация аутентификации и авторизации
- Добавление rate limiting для API

### Улучшение API
- Добавление версионирования API
- Реализация пагинации для истории
- Добавление фильтрации и сортировки истории
- Создание OpenAPI/Swagger документации

### Тестирование и качество
- Написание интеграционных тестов
- Добавление тестов производительности
- Реализация CI/CD pipeline
- Добавление мониторинга и логирования

### Архитектура и рефакторинг
- Разделение на микросервисы
- Добавление базы данных вместо файлового хранения
- Реализация кэширования
- Добавление Docker контейнеризации
